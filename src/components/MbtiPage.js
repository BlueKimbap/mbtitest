// src/components/MbtiPage.js
import React, { useState, useEffect, useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import './MbtiPage.css';
import { GoogleGenerativeAI } from '@google/generative-ai';
import NavigationBar from './NavigationBar';

const TOTAL_QUESTIONS = [
  "í•œì í•œ ì‹œê³¨ ë§ˆì„ì„ ì§€ë‚˜ë˜ ë‹¹ì‹ ê³¼ íŒŒí‹°ì›ë“¤ì€ ë§ˆì„ ê´‘ì¥ì—ì„œ í•œ ìƒì¸ì´ ìµœì‹  ìœ í–‰í•˜ëŠ” ë§ˆë²• ë¬¼í’ˆì„ ìë‘ìŠ¤ëŸ½ê²Œ ì„ ë³´ì´ëŠ” ëª¨ìŠµì„ ë´…ë‹ˆë‹¤. ê·¸ëŠ” ì´ê²ƒì´ í¬ê·€í•œ ìœ ë¬¼ì´ë¼ë©°, ë‹¨ëˆ ëª‡ ë‹¢ì´ë©´ ê°•ë ¥í•œ í˜ì„ ì†ì— ë„£ì„ ìˆ˜ ìˆë‹¤ê³  ì¥ë‹´í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ íŒŒí‹°ì› ì¤‘ ë§ˆë²•ì‚¬ëŠ” ì´ ë¬¼ê±´ì´ ì‚¬ê¸°ì¼ ê°€ëŠ¥ì„±ì´ í¬ë‹¤ë©° ì‹ ì¤‘íˆ ì¡°ì‚¬í•´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•©ë‹ˆë‹¤. ë°˜ë©´ ë“œì›Œí”„ëŠ” [ìœ„í—˜ì„ ê°ìˆ˜í•´ì•¼ í° ê²ƒì„ ì–»ëŠ”ë‹¤]ë©° ë‹¹ì¥ êµ¬ë§¤í•  ê²ƒì„ ê¶Œí•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì´ ë§ˆë²• ë¬¼í’ˆì„ ì§€ê¸ˆ êµ¬ë§¤í•  ì˜í–¥ì´ ìˆìœ¼ì‹ ê°€ìš”?",
  "ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ê¹Šì€ ë˜ì „ì—ì„œ ë¯¸ì§€ì˜ ë¶„ê¸°ì ì„ ë§ˆì£¼í•©ë‹ˆë‹¤. í•œìª½ ê¸¸ì€ ì–´ë‘ìš´ ê¸°ìš´ì´ ê°ë„ëŠ” ì¢ì€ ê¸¸ì´ë©°, ë‹¤ë¥¸ í•œìª½ì€ í‰í™”ë¡œìš´ í’ê²½ì˜ ë„“ì€ ê¸¸ì…ë‹ˆë‹¤. ì „ì‚¬ëŠ” ìœ„í—˜ì„ ê°ìˆ˜í•˜ê³  ë³´ìƒì´ í´ ê°€ëŠ¥ì„±ì´ ë†’ì€ ì–´ë‘ìš´ ê¸¸ì„ ì„ íƒí•˜ìê³  ì£¼ì¥í•©ë‹ˆë‹¤. ë°˜ë©´ ì„±ì§ìëŠ” ì•ˆì „í•˜ê³  ëª…í™•í•œ ê¸¸ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì˜³ë‹¤ê³  ë§í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ìœ„í—˜ì´ ë„ì‚¬ë¦¬ë”ë¼ë„ ë¯¸ì§€ì˜ ê¸¸ì„ íƒí—˜í•˜ëŠ” ê²ƒì´ ë” í¥ë¯¸ë¡­ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ì—¬ê´€ì—ì„œ ì‰¬ê³  ìˆë˜ ë‹¹ì‹ ì€ í•œ ë‚¯ì„  ëª¨í—˜ê°€ê°€ í¥ë¯¸ë¡œìš´ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ì£¼ëŠ” ê²ƒì„ ë“£ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŠ” ë¨¼ ë™ë°©ì˜ ì œêµ­ì—ì„œ ì˜¨ ì‚¬ëŒì´ì—ˆê³ , ê·¸ê³³ì—ì„œë§Œ ì „í•´ì§€ëŠ” ì‹ ë¹„ë¡œìš´ ì „ì„¤ê³¼ ë…íŠ¹í•œ ì „íˆ¬ ê¸°ìˆ ì— ëŒ€í•´ ì´ì•¼ê¸°í•©ë‹ˆë‹¤. ë§ˆë²•ì‚¬ëŠ” ê·¸ì—ê²Œ ë” ë§ì€ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ë‹¬ë¼ë©° í¥ë¯¸ë¥¼ ë³´ì´ì§€ë§Œ, ì „ì‚¬ëŠ” ë‚¯ì„  ì •ë³´ì— íœ˜ë‘˜ë¦¬ì§€ ë§ê³  ìµìˆ™í•œ ë°©ì‹ëŒ€ë¡œ í–‰ë™í•˜ëŠ” ê²ƒì´ ìµœì„ ì´ë¼ë©° ë¬´ê´€ì‹¬í•œ íƒœë„ë¥¼ ë³´ì…ë‹ˆë‹¤. ë‹¹ì‹ ì€ ë‚¯ì„  ëª¨í—˜ê°€ì—ê²Œ ëŒ€í™”ë¥¼ ê±¸ì–´ë³´ê² ë‚˜ìš”?",
  "í•œ ì™•êµ­ì˜ ì‚¬ì ˆì´ ë‹¹ì‹ ê³¼ íŒŒí‹°ì—ê²Œ ì°¾ì•„ì™€ ì¤‘ìš”í•œ ì„ë¬´ë¥¼ ì˜ë¢°í•©ë‹ˆë‹¤. ê·¸ ì„ë¬´ëŠ” ì¹¨ëµêµ­ê³¼ì˜ ì „ìŸì„ í”¼í•˜ê¸° ìœ„í•´ ë¹„ë°€ë¦¬ì— ì™¸êµ í˜‘ìƒì„ ì§„í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì„±ì§ìëŠ” ì™¸êµì  í•´ê²°ì´ ìµœì„ ì´ë¼ë©° ì´ë¥¼ ìˆ˜ë½í•´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ì „ì‚¬ëŠ” í”¼í•´ê°€ ë°œìƒí•˜ë”ë¼ë„ ì¹¨ëµêµ­ì—ê²Œ êµ´ë³µí•˜ì§€ ì•ŠëŠ” ê²ƒì´ ë” í™•ì‹¤í•œ ë°©ë²•ì´ë¼ë©° ë°˜ëŒ€í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ êµ´ìš•ì ì´ë”ë¼ë„ í‰í™”ì ì¸ í˜‘ìƒì„ ì‹œë„í•´ë³´ì‹œê² ë‚˜ìš”?",
  "ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ì˜¤ë˜ëœ íí—ˆì—ì„œ ê³ ëŒ€ ìœ ì ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë°, ê·¸ê³³ì—ëŠ” ì—¬ëŸ¬ ê°œì˜ ì‹ ë¹„ë¡œìš´ ë¬¸ì–‘ì´ ìƒˆê²¨ì§„ ë¬¸ì´ ì„œ ìˆìŠµë‹ˆë‹¤. ë§ˆë²•ì‚¬ëŠ” ì˜¤ë˜ëœ ê¸°ë¡ì„ í•´ì„í•˜ì—¬ ì‹ ì¤‘í•˜ê²Œ ë¬¸ì„ ì—´ì–´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ê·¸ê²ƒì€ ì‹œê°„ì´ ì–¼ë§ˆë‚˜ ê±¸ë¦´ì§€ ëª¨ë¦…ë‹ˆë‹¤. ì–´ì©Œë©´ ëª‡ ë‹¬ì´ ê±¸ë¦´ì§€ë„ ëª¨ë¥´ì£ . ë“œì›Œí”„ëŠ” ì§ì ‘ ë¬¸ì„ ì—´ì–´ë³´ë©° ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì‹¤í—˜í•˜ëŠ” ê²ƒì´ ë¹ ë¥¸ ë°©ë²•ì´ë¼ê³  ë§í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ëª¨í—˜ì ìœ¼ë¡œ ì§ì ‘ ë¬¸ì„ ì—´ì–´ë³´ë©° íƒí—˜ í•˜ì‹œê² ë‚˜ìš”?",
  "ì–´ëŠ ë‚  í•œ ì„±ì—ì„œ ì—´ë¦° ì—°íšŒì— ì´ˆëŒ€ë°›ì•˜ìŠµë‹ˆë‹¤. ê·€ì¡±ë“¤ê³¼ ìƒì¸ë“¤ì´ ëª¨ì—¬ ì •ë³´ë¥¼ êµí™˜í•˜ë©°, ê°ìì˜ ëª©ì ì„ ìœ„í•´ ì€ë°€í•œ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ê³  ìˆìŠµë‹ˆë‹¤. ì„±ì§ìëŠ” ì‚¬ëŒë“¤ ì‚¬ì´ë¥¼ ììœ ë¡­ê²Œ ëŒì•„ë‹¤ë‹ˆë©° í¥ë¯¸ë¡œìš´ ì •ë³´ë¥¼ ìºë‚¼ ê¸°íšŒë¼ê³  ìƒê°í•˜ì§€ë§Œ, ì „ì‚¬ëŠ” ë‚¯ì„  ì´ë“¤ê³¼ì˜ êµë¥˜ëŠ” í”¼ë¡œí•  ë¿ì´ë¼ë©° ì¡°ìš©í•œ êµ¬ì„ì—ì„œ ì‰¬ê¸°ë¥¼ ì›í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì´ëŸ° ì‚¬êµì ì¸ ìë¦¬ì—ì„œ ìµœëŒ€í•œ ë§ì€ ì‚¬ëŒê³¼ êµë¥˜í•˜ë©° ì •ë³´ë¥¼ ì–»ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ì˜ë¢°ë¥¼ ë°›ì•„ í•œ ë§ˆì„ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ë§ˆì„ì— ë„ì°©í•˜ìë§ˆì, ë‘ ê°œì˜ ìƒë°˜ëœ ì†Œë¬¸ì„ ë“£ê²Œ ë©ë‹ˆë‹¤. í•œìª½ì—ì„œëŠ” ë§ˆì„ì„ ê´´ë¡­íˆëŠ” ì•…ë‹¹ì´ ì‚°ì†ì— ìˆ¨ì–´ ìˆë‹¤ê³  ì£¼ì¥í•˜ê³ , ë‹¤ë¥¸ ìª½ì—ì„œëŠ” ë§ˆì„ ì§€ë„ìê°€ ì‚¬ì‹¤ì€ í­êµ°ì´ë©° ë°˜ë€ì„ ì§„ì••í•˜ë ¤ í•œë‹¤ê³  ë§í•©ë‹ˆë‹¤. ì „ì‚¬ëŠ” ì¦‰ì‹œ ë§ˆì„ ì£¼ë¯¼ë“¤ì„ ì¡°ì‚¬í•´ ëˆ„ê°€ ê±°ì§“ë§ì„ í•˜ê³  ìˆëŠ”ì§€ ì°¾ì•„ì•¼ í•œë‹¤ê³  ë§í•˜ê³ , ì„±ì§ìëŠ” ì˜¤í•´ê°€ ìƒê¸°ì§€ ì•Šë„ë¡ ê° ì§„ì˜ì„ ë§Œë‚˜ ì§„ì‹¬ì„ ë“¤ì–´ë³´ì•„ì•¼ í•œë‹¤ê³  ì£¼ì¥í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¶„ì„í•˜ëŠ” ê²ƒì´ ì‚¬ëŒë“¤ê³¼ ì‹ ë¢°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëŒ€í™”í•˜ëŠ” ê²ƒë³´ë‹¤ ë” íš¨ìœ¨ì ì´ë¼ê³  ìƒê°í•˜ë‚˜ìš”?",
  "ì—¬ì •ì„ ì´ì–´ê°€ë˜ ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” í•œ ì™•êµ­ì˜ ìˆ˜ë„ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë„ì‹œë¡œ ë“¤ì–´ì„œìë§ˆì ì‹œë¯¼ë“¤ì´ ê´‘ì¥ì—ì„œ ë…¼ìŸì„ ë²Œì´ê³  ìˆëŠ” ëª¨ìŠµì„ ë³´ê²Œ ë©ë‹ˆë‹¤. ì™•ì€ ìµœê·¼ ì„¸ê¸ˆì„ ì¸ìƒí•˜ì—¬ ê°•ë ¥í•œ ë°©ì–´êµ°ì„ ì–‘ì„±í•˜ë ¤ í•˜ê³  ìˆìœ¼ë©°, ê·¸ ë•ë¶„ì— ì™¸ë¶€ì˜ ìœ„í˜‘ìœ¼ë¡œë¶€í„° ì•ˆì „ì´ ë³´ì¥ë  ê²ƒì´ë¼ ì£¼ì¥í•©ë‹ˆë‹¤. ë°˜ë©´, ìƒì¸ë“¤ê³¼ ì‹œë¯¼ë“¤ì€ ì„¸ê¸ˆ ë¶€ë‹´ì´ ë„ˆë¬´ ì»¤ ìƒê³„ë¥¼ ìœ„í˜‘ë°›ê³  ìˆìœ¼ë©°, ì™•ì´ ë¬´ë¦¬í•œ êµ°ì‚¬ í™•ì¥ì„ í•˜ê³  ìˆë‹¤ê³  ë°˜ë°œí•©ë‹ˆë‹¤. ì „ì‚¬ëŠ” ê°•ë ¥í•œ êµ°ëŒ€ëŠ” í•„ìˆ˜ì ì´ë¼ë©° ì™•ì˜ ê²°ì •ì„ ì§€ì§€í•˜ì§€ë§Œ, ì„±ì§ìëŠ” ì‹œë¯¼ë“¤ì˜ ì–´ë ¤ì›€ì„ ì™¸ë©´í•´ì„œëŠ” ì•ˆ ëœë‹¤ê³  ì£¼ì¥í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ êµ­ê°€ì˜ ì•ˆì „ì„ ìœ„í•´ ì‹œë¯¼ë“¤ì˜ í¬ìƒì´ ë¶ˆê°€í”¼í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ëª¨í—˜ ë„ì¤‘ ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ì–´ëŠ íí—ˆê°€ ëœ ì„±ì—ì„œ ê·€ì¡±ì˜ ìœ ë ¹ì„ ë§Œë‚©ë‹ˆë‹¤. ê·¸ëŠ” ì–µìš¸í•œ ëˆ„ëª…ì„ ì“°ê³  ì£½ì—ˆìœ¼ë©°, ìì‹ ì˜ ê²°ë°±ì„ ì¦ëª…í•´ë‹¬ë¼ê³  ê°„ì²­í•©ë‹ˆë‹¤. ì„±ì˜ ì˜¤ë˜ëœ ë¬¸ì„œì™€ ìœ í’ˆì„ ì¡°ì‚¬í•˜ë©´ ì§„ì‹¤ì„ ë°í˜€ë‚¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ì˜ë¢°ë¥¼ ë§¡ê²Œ ë˜ë©´ ì¤‘ìš”í•œ ì—¬ì •ì„ í¬ê²Œ ëŠ¦ì¶œ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ë§ˆë²•ì‚¬ëŠ” ì—­ì‚¬ì  ì§„ì‹¤ì„ ë°íˆëŠ” ê²ƒì€ ì¤‘ìš”í•œ ì¼ì´ë¼ë©° ì´ ì‚¬ê±´ì„ í•´ê²°í•´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ì „ì‚¬ëŠ” ì´ë¯¸ ë§¡ì€ ì„ë¬´ë¥¼ ë°©í•´ë°›ì„ ìˆ˜ ì—†ë‹¤ë©° ë¹¨ë¦¬ ë– ë‚˜ì•¼ í•œë‹¤ê³  ë§í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì´ ë¯¸í•´ê²°ëœ ì§„ì‹¤ì„ ë°íˆëŠ” ê²ƒì´ ê°€ì¹˜ ìˆë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ê°•ì„ ë”°ë¼ ì—¬í–‰í•˜ë˜ ì¤‘, ë°°ê°€ ì „ë³µë˜ì–´ ì¡°ë‚œë‹¹í•œ ì—¬í–‰ìë“¤ì„ ë°œê²¬í•©ë‹ˆë‹¤. ê·¸ë“¤ì€ ë§ˆì„ë¡œ ëŒì•„ê°ˆ ê¸¸ì„ ìƒê³  ì‹ëŸ‰ë„ ê±°ì˜ ë°”ë‹¥ë‚œ ìƒíƒœì…ë‹ˆë‹¤. ì„±ì§ìëŠ” ê·¸ë“¤ì„ ë•ëŠ” ê²ƒì´ ë‹¹ì—°í•œ ë„ë¦¬ë¼ë©° ë§ˆì„ê¹Œì§€ ë™í–‰í•´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ë“œì›Œí”„ëŠ” ìš°ë¦¬ë„ ì¶©ë¶„íˆ ìœ„í—˜í•œ ìƒí™©ì´ë©°, ëª¨í—˜ì— ì§‘ì¤‘í•´ì•¼ í•œë‹¤ê³  ë§í•©ë‹ˆë‹¤. ë„ì›€ì„ ì£¼ëŠ” ê²ƒì€ ì¢‹ì§€ë§Œ, ìš°ë¦¬ ìì›ê¹Œì§€ ì†Œëª¨í•´ê°€ë©´ì„œ ì´ë“¤ì„ ëŒë³´ëŠ” ê²ƒì€ ë¬´ë¦¬ë¼ëŠ” ê²ƒì´ì£ . ë‹¹ì‹ ì€ ì¡°ë‚œë¯¼ë“¤ì„ ëê¹Œì§€ ë³´í˜¸í•˜ë©° ë§ˆì„ê¹Œì§€ ë°ë ¤ê°€ì•¼ í•œë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ì—¬ê´€ì—ì„œ ì‰¬ê³  ìˆë˜ ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” í•œ ìŒìœ ì‹œì¸ìœ¼ë¡œë¶€í„° í¥ë¯¸ë¡œìš´ ì œì•ˆì„ ë°›ìŠµë‹ˆë‹¤. ê·¸ëŠ” ë‹¹ì‹ ì˜ ëª¨í—˜ë‹´ì„ ë…¸ë˜ë¡œ ë§Œë“¤ì–´ ì™•êµ­ ì „ì—­ì— í¼ëœ¨ë¦¬ê² ë‹¤ê³  í•©ë‹ˆë‹¤. ë•ë¶„ì— ëª…ì„±ì„ ì–»ê³  ê·€ì¡±ë“¤ì—ê²Œ ì£¼ëª©ë°›ì„ ê¸°íšŒê°€ ë  ìˆ˜ë„ ìˆì§€ë§Œ, ì˜ëª»ëœ ì •ë³´ê°€ í¼ì§€ê±°ë‚˜ ì›ì¹˜ ì•ŠëŠ” ì ë“¤ì˜ í‘œì ì´ ë  ìœ„í—˜ë„ ìˆìŠµë‹ˆë‹¤. ë§ˆë²•ì‚¬ëŠ” ì´ëŸ° ê¸°íšŒë¥¼ ë†“ì³ì„  ì•ˆ ëœë‹¤ë©° ì ê·¹ì ìœ¼ë¡œ í™ë³´í•´ì•¼ í•œë‹¤ê³  í•˜ì§€ë§Œ, ì „ì‚¬ëŠ” ì¡°ìš©íˆ í–‰ë™í•˜ëŠ” ê²ƒì´ ë” í˜„ëª…í•˜ë‹¤ê³  ì£¼ì¥í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì„¸ìƒì— ë‹¹ì‹ ì˜ íŒŒí‹°ê°€ ë„ë¦¬ ì•Œë ¤ì§€ëŠ” ê²ƒì„ ê¸ì •ì ìœ¼ë¡œ ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ì—¬ì • ì¤‘ ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ê¹Šì€ ì‚°ì†ì—ì„œ ì „ì„¤ì ì¸ ëŒ€ì¥ì¥ì´ë¥¼ ë§Œë‚©ë‹ˆë‹¤. ê·¸ëŠ” ì—„ì²­ë‚œ ê¸°ìˆ ì„ ì§€ë…”ì§€ë§Œ, ê·¸ê°€ ë§Œë“  ë¬´ê¸°ë¥¼ ì–»ê¸° ìœ„í•´ì„œëŠ” ë‹¹ì‹ ì´ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ë¬´ì–¸ê°€ë¥¼ ì œë¬¼ë¡œ ë°”ì³ì•¼ í•œë‹¤ê³  í•©ë‹ˆë‹¤. ê·¸ê²ƒì´ ì–‘ì‹¬ì´ ëë˜, ì‹ ë…ì´ ëë˜ ë§ì´ì£ . ì „ì‚¬ëŠ” ê°•ë ¥í•œ ì¥ë¹„ë¥¼ ì–»ê¸° ìœ„í•´ì„œëŠ” í¬ìƒì´ í•„ìš”í•˜ë‹¤ë©° ê±°ë˜ë¥¼ ë°›ì•„ë“¤ì—¬ì•¼ í•œë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ì„±ì§ìëŠ” ë¬¼ì§ˆì ì¸ í˜ë³´ë‹¤ ì†Œì¤‘í•œ ê°€ì¹˜ë¥¼ ì§€í‚¤ëŠ” ê²ƒì´ ë” ì¤‘ìš”í•˜ë‹¤ê³  ë§í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ë” í° í˜ì„ ì–»ê¸° ìœ„í•´ ì¤‘ìš”í•œ ê²ƒì„ í¬ìƒí•˜ëŠ” ê²ƒì´ ì •ë‹¹í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ì—¬ì •ì„ ê³„ì†í•˜ë˜ ì¤‘, ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” í•œ ì‹ ë¹„ë¡œìš´ ì„íŒì„ ë°œê²¬í•©ë‹ˆë‹¤. ê·¸ê²ƒì€ ê³ ëŒ€ì˜ ê°•ë ¥í•œ ì£¼ë¬¸ì´ ìƒˆê²¨ì§„ ìœ ë¬¼ë¡œ, í•´ë…í•˜ë©´ ì—„ì²­ë‚œ í˜ì„ ì–»ì„ ìˆ˜ ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¬¸ì œëŠ” ì´ ì£¼ë¬¸ì´ ìœ„í—˜í•  ìˆ˜ë„ ìˆìœ¼ë©°, í•œ ë²ˆ ì‚¬ìš©í•˜ë©´ ëŒì´í‚¬ ìˆ˜ ì—†ëŠ” ê²°ê³¼ë¥¼ ì´ˆë˜í•  ìˆ˜ë„ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë§ˆë²•ì‚¬ëŠ” ì§€ì‹ì„ ì¶”êµ¬í•˜ëŠ” ê²ƒì´ ëª¨í—˜ê°€ì˜ ë³¸ì§ˆì´ë¼ë©° ë°˜ë“œì‹œ í•´ë…í•´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ì„±ì§ìëŠ” ìì—°ì˜ ì§ˆì„œë¥¼ í•¨ë¶€ë¡œ ê±´ë“œë ¤ì„œëŠ” ì•ˆ ëœë‹¤ë©° ê·¸ëƒ¥ ë‘ê³  ê°€ìê³  í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ë¯¸ì§€ì˜ ì§€ì‹ì„ íƒêµ¬í•˜ëŠ” ê²ƒì´ ìœ„í—˜ì„ ê°ìˆ˜í•  ë§Œí¼ ê°€ì¹˜ ìˆë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” í™©ëŸ‰í•œ ì „ì¥ì—ì„œ ì“°ëŸ¬ì§„ ê¸°ì‚¬ í•œ ëª…ì„ ë°œê²¬í•©ë‹ˆë‹¤. ê·¸ëŠ” ì¹˜ëª…ì ì¸ ë¶€ìƒì„ ì…ê³  ìˆìœ¼ë©°, ë§ˆì§€ë§‰ í˜ì„ ë‹¤í•´ ë‹¹ì‹ ì—ê²Œ ê°„ì²­í•©ë‹ˆë‹¤. [ë‚´ê°€ ë§¡ì€ ì„ë¬´ë¥¼ ì™„ìˆ˜í•´ ì£¼ì‹œì˜¤â€¦]ë¼ë©° ì¤‘ìš”í•œ ì„œì‹ ì„ ê±´ë„¤ê³ , ì´ ì„œì‹ ì„ ì™•ì—ê²Œ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì™•êµ­ì˜ ìš´ëª…ì„ ë°”ê¿€ ìˆ˜ë„ ìˆë‹¤ê³  í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ì„ë¬´ë¥¼ ë§¡ìœ¼ë©´ ë‹¹ì‹ ì´ ì›ë˜ ê³„íší–ˆë˜ ëª©í‘œëŠ” ë’¤ë¡œ ë¯¸ë¤„ì§€ê²Œ ë©ë‹ˆë‹¤. ì„±ì§ìëŠ” ì´ ê¸°ì‚¬ì˜ ë§ˆì§€ë§‰ ì†Œì›ì„ ë“¤ì–´ì£¼ëŠ” ê²ƒì´ ë„ë¦¬ë¼ê³  í•˜ì§€ë§Œ, ë“œì›Œí”„ëŠ” ìš°ë¦¬ì˜ ëª©í‘œë¥¼ ë²—ì–´ë‚˜ì§€ ì•ŠëŠ” ê²ƒì´ í˜„ëª…í•˜ë‹¤ê³  ë§í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ìì‹ ì˜ ì›ë˜ ëª©í‘œë¥¼ í¬ìƒí•˜ë”ë¼ë„ ì´ ìƒˆë¡œìš´ ì„ë¬´ë¥¼ ë°›ì•„ë“¤ì´ëŠ” ê²ƒì´ ì˜³ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "í•œ ë§ˆë²• ì—°êµ¬ì†Œì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. ì´ê³³ì—ì„œëŠ” ê¸ˆê¸°ì‹œëœ ì‹¤í—˜ì´ ì§„í–‰ë˜ê³  ìˆìœ¼ë©°, ì—°êµ¬ìë“¤ì€ ê°•ë ¥í•œ ë§ˆë²•ì„ ì°½ì¡°í•˜ëŠ” ê³¼ì •ì—ì„œ ìœ¤ë¦¬ì ì¸ ë…¼ë€ì„ ì¼ìœ¼í‚¤ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë“¤ì€ ì´ ì—°êµ¬ê°€ ì™•êµ­ì˜ ë¯¸ë˜ë¥¼ ë°”ê¿€ í˜ì‹ ì ì¸ ë°œê²¬ì„ ê°€ì ¸ì˜¬ ê²ƒì´ë¼ ì£¼ì¥í•˜ì§€ë§Œ, ì‹¤í—˜ì˜ ê³¼ì •ì—ì„œ ë§ì€ í¬ìƒì´ ë”°ë¥¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë§ˆë²•ì‚¬ëŠ” ì—°êµ¬ê°€ ê¸ˆì§€ë  ì´ìœ ëŠ” ì—†ë‹¤ë©°, ì§„ë³´ë¥¼ ìœ„í•´ì„œëŠ” ì–´ë–¤ ìœ„í—˜ë„ ê°ìˆ˜í•´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•©ë‹ˆë‹¤. ë°˜ë©´ ì„±ì§ìëŠ” ìì—°ê³¼ ìƒëª…ì˜ ê· í˜•ì„ í•´ì¹˜ëŠ” ì—°êµ¬ëŠ” ìš©ë‚©í•  ìˆ˜ ì—†ë‹¤ê³  ë°˜ëŒ€í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ìœ„ëŒ€í•œ ë°œì „ì„ ìœ„í•´ì„œë¼ë©´ ì´ëŸ° ì—°êµ¬ë„ ìš©ì¸ë  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ëª¨í—˜ì„ ì´ì–´ê°€ë˜ ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ê³ ëŒ€ ì‹ ì „ì—ì„œ ì‹ ë¹„í•œ ë§ˆë²•ì˜ ê±°ìš¸ì„ ë°œê²¬í•©ë‹ˆë‹¤. ì´ ê±°ìš¸ì€ ë“¤ì—¬ë‹¤ë³´ëŠ” ìê°€ ê°€ì¥ ê¹Šì´ ì›í•˜ëŠ” ë¯¸ë˜ì˜ ëª¨ìŠµì„ ë¹„ì¶°ì£¼ì§€ë§Œ, ê·¸ê²ƒì´ ì‹¤ì œë¡œ ì´ë£¨ì–´ì§ˆ ê²ƒì´ë¼ëŠ” ë³´ì¥ì€ ì—†ìŠµë‹ˆë‹¤. ë§ˆë²•ì‚¬ëŠ” ì´ ê±°ìš¸ì„ í†µí•´ ìì‹ ì˜ ì§„ì •í•œ ìš•ë§ì„ ê¹¨ë‹«ê³  ëª©í‘œë¥¼ ë”ìš± ëª…í™•íˆ í•  ìˆ˜ ìˆë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ë“œì›Œí”„ëŠ” í™˜ìƒì— ì‚¬ë¡œì¡í˜€ í˜„ì‹¤ì„ ë§ê°í•  ìœ„í—˜ì´ í¬ë‹¤ë©° ê²½ê³„í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ìì‹ ì˜ ê°€ì¥ ê¹Šì€ ìš•ë§ì„ ì•Œê²Œ ëœë‹¤ë©´ ê·¸ê²ƒì´ ë‹¹ì‹ ì˜ ì‚¶ì— ê¸ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹  ê²ƒì´ë¼ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ë§ˆì¹¨ë‚´ ë§ˆì™•ì„±ì´ ìˆëŠ” ì €ì£¼ë°›ì€ ë•… ê·¼ì²˜ê¹Œì§€ ë‹¤ë‹¤ëìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê³³ì€ ìƒìƒ ì´ìƒìœ¼ë¡œ í—˜ë‚œí•œ ì§€ì—­ì´ì—ˆê³ , ì‹ëŸ‰ê³¼ ë¬¼ìê°€ ì ì  ë¶€ì¡±í•´ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ìƒí™©ì—ì„œ í•œ ì–´ë‘ìš´ ì„¸ë ¥ì˜ ì‚¬ì ˆì´ ë‹¹ì‹ ì„ ì°¾ì•„ì™€ ì œì•ˆì„ í•©ë‹ˆë‹¤. ì§€ê¸ˆ ìê¸° ì„¸ë ¥ê³¼ í™”ì¹œì„ ë§ºê³  ëŒì•„ê°€ë©´, ë‹¹ì‹ ê³¼ ë™ë£Œë“¤ì€ ì•ˆì „ì„ ë³´ì¥ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë§ˆë²•ì‚¬ëŠ” í˜‘ìƒì„ í†µí•´ ë” ë‚˜ì€ ê¸°íšŒë¥¼ ì°¾ì„ ìˆ˜ë„ ìˆë‹¤ë©° ê³ ë ¤í•  ê°€ì¹˜ê°€ ìˆë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ì „ì‚¬ëŠ” ì•…ê³¼ íƒ€í˜‘í•˜ëŠ” ê²ƒì€ ìˆì„ ìˆ˜ ì—†ëŠ” ì¼ì´ë¼ë©° ë‹¨ì¹¼ì— ê±°ì ˆí•´ì•¼ í•œë‹¤ê³  í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ë” í° ëª©í‘œë¥¼ ìœ„í•´ì„œë¼ë©´ ì ê³¼ì˜ í˜‘ìƒë„ ê³ ë ¤í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ë§ˆì™•ì„±ì´ ì½”ì•ì— ë‹¤ê°€ì™”ì„ ë•Œ, ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ê¸°ì´í•œ ê´‘ê²½ì„ ëª©ê²©í•©ë‹ˆë‹¤. ë§ˆì™•ì„±ì„ ë‘˜ëŸ¬ì‹¼ í™©íí•œ ëŒ€ì§€ëŠ” ì˜ˆìƒê³¼ ë‹¬ë¦¬ í™œê¸°ê°€ ë„˜ì¹˜ë©°, ì´ê³³ì— ì‚¬ëŠ” ì‚¬ëŒë“¤ì´ ê³µí¬ì— ì§ˆë ¤ìˆê¸°ëŠ”ì»¤ë…• í‰ì˜¨í•œ ì¼ìƒì„ ë³´ë‚´ê³  ìˆìŠµë‹ˆë‹¤. ì„± ì•ˆì—ì„œ ë‹¤ìŠ¤ë¦¬ëŠ” ë§ˆì™•ì´ ë¬´ìë¹„í•œ í­êµ°ì´ë¼ëŠ” ì†Œë¬¸ê³¼ëŠ” ë‹¬ë¦¬, ì´ê³³ì—ì„œëŠ” ì˜¤íˆë ¤ í‰í™”ê°€ ìœ ì§€ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤. ì´ì— ëŒ€í•´ ë§ˆë²•ì‚¬ëŠ” ë§ˆì™•ì˜ ì‹¤ì²´ë¥¼ ì§ì ‘ í™•ì¸í•œ í›„ ê³µê²© ì—¬ë¶€ë¥¼ ê²°ì •í•´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•˜ì§€ë§Œ, ì„±ì§ìëŠ” ë§ˆì™•ì˜ ë³¸ì§ˆì´ ë¬´ì—‡ì´ë“  ê°„ì—, ì•…ì˜ ê·¼ì›ì€ ë°˜ë“œì‹œ ì œê±°í•´ì•¼ í•œë‹¤ë©° ì›ë˜ ê³„íšì„ ë°€ê³  ë‚˜ê°€ì•¼ í•œë‹¤ê³  ë§í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì˜ˆìƒê³¼ ë‹¤ë¥¸ ì§„ì‹¤ì„ ë§ˆì£¼í–ˆì„ ë•Œ, ì›ë˜ ì‹ ë…ì„ ê³ ìˆ˜í•˜ëŠ” ê²ƒì´ ë” ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ë‹¹ì‹ ê³¼ íŒŒí‹°ëŠ” ë§ˆì™•ì„± ê·¼ì²˜ì˜ í•œ í‰í™”ë¡œìš´ ë§ˆì„ì— ë„ì°©í•©ë‹ˆë‹¤. ê²‰ë³´ê¸°ì—ëŠ” í‰ì˜¨í•œ ë“¤íŒê³¼ ì”ì”í•œ ê°•ë¬¼, ì¡°ìš©í•œ ì£¼ê±°í™˜ê²½ì´ ì£¼ë¯¼ë“¤ì—ê²Œ ì•ˆì •ì„ ì£¼ëŠ” ë“¯ ë³´ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ í‰í™”ëŠ” ë§ˆì™•ì„¸ë ¥ì˜ ì—„ê²©í•œ í†µì œ í•˜ì— ìœ ì§€ë˜ëŠ”, ì‹¤ìƒì€ ì–µì••ë°›ëŠ” ììœ  ì—†ëŠ” ì•ˆì •ì´ì—ˆìŠµë‹ˆë‹¤. ì£¼ë¯¼ë“¤ì€ í˜„ì¬ì˜ ì•ˆë½í•¨ì— ìµìˆ™í•´ì§„ ë‚˜ë¨¸ì§€, ì§„ì •í•œ ììœ¨ê³¼ ììœ ë¥¼ ëˆ„ë¦´ ê¸°íšŒë¥¼ ìƒì–´ë²„ë ¸ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€ ì´ ë§ˆì„ì˜ ì£¼ë¯¼ë“¤ì´ ì§„ì •í•œ ììœ ë¥¼ ì°¾ê¸° ìœ„í•´ì„œëŠ”, ì§€ê¸ˆ ë³´ì´ëŠ” í‰í™”ë¥¼ ê¹¨ëœ¨ë¦¬ê³  ëª¨ë“  ê±¸ ë’¤ì—ì–´ì•¼ í•œë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”?",
  "ë§ˆì™•ì˜ ì˜¥ì¢Œ ì•ì— ì„°ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë§ˆì™•ì˜ ëˆˆë¹›ì—ëŠ” ì „í˜•ì ì¸ í­êµ°ì˜ ì”í˜¹í•¨ ëŒ€ì‹ , ì˜¤íˆë ¤ ëƒ‰ì •í•˜ê³  ì¹¨ì°©í•œ í‰ì˜¨ì´ ì„œë ¤ ìˆìŠµë‹ˆë‹¤. ê·¸ëŠ” ì²œì²œíˆ ì…ì„ ì—´ì–´ ë§í•©ë‹ˆë‹¤. [ë„¤ê°€ ì§€ê¸ˆê¹Œì§€ ë¯¿ì–´ì˜¨ ì „ì„¤, ê·¸ ëª¨ë“  ê³µí¬ëŠ” ë‹¨ í•œ ê°€ì§€ ì§„ì‹¤ì„ ê°ì¶”ê³  ìˆë„¤. ë‚˜ëŠ” ë‹¨ìˆœí•œ ì•…ì˜ í™”ì‹ ì´ ì•„ë‹ˆë‹¤. ë‚´ ì¡´ì¬ëŠ” ìˆ˜ì„¸ê¸° ì „, ì„¸ê³„ ê° ì™•êµ­ì˜ ì§€ë„ìë“¤ì´ ëª¨ì—¬ ì„œë¡œì˜ ë¶ˆì‹ ê³¼ ë¶„ì—´ì„ ë§‰ê¸° ìœ„í•´ í•©ì˜í•œ ì˜ë¡€ì ì¸ ìƒì§•ì¼ ë¿ì´ì—ˆìœ¼ë‹ˆê¹Œ. ì ˆëŒ€ì ì¸ ì•…ì´ ìˆì–´ì•¼ ì‚¬ëŒë“¤ì€ ì„œë¡œ ë­‰ì³, ê³µí†µì˜ ì ì„ í–¥í•´ í˜ì„ í•©ì¹  ìˆ˜ ìˆì—ˆê³ , ê·¸ë¡œì¨ ì¼ì‹œì ì´ë‚˜ë§ˆ í‰í™”ì™€ ì§ˆì„œë¥¼ ìœ ì§€í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒì´ë‹¤. ë‚´ê°€ ë°”ë¡œ, ê·¸ë“¤ì´ ì„ íƒí•œ [ì•…ì˜ í‘œìƒ]ì´ì ê· í˜•ì˜ ìˆ˜ë‹¨ì´ì§€. ì´ì œ ë‚¨ì€ ê±´ ë„ˆì˜ ì„ íƒë¿ì´ë‹¤. ë„¤ê°€ ë§ˆì™•ì´ ë˜ë˜ê°€, ì•„ë‹ˆë©´ ë§ˆì™•ì´ ì—†ëŠ” ì„¸ìƒì— í˜¼ëˆì„ ì´ˆë˜í•˜ë˜ê°€.] ê·¸ì˜ ê³ ë°±ì— íŒŒí‹°ì˜ ë™ë£Œë“¤ì€ ì¶©ê²©ì— ë¹ ì§€ê³ , ë‹¹ì‹ ì˜ ë§ˆìŒì†ì—ëŠ” í˜¼ë€ì˜ íŒŒë„ê°€ ì´ëŠ” ê²ƒì„ ëŠë‚ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì´ ì¸ìœ„ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ í‰í™”ë¥¼ ë¶€ì •í•˜ê³  ì§ˆì„œë¥¼ ê¹¨ëœ¨ë¦¬ê² ìŠµë‹ˆê¹Œ?",
];

const genAI = new GoogleGenerativeAI(process.env.REACT_APP_GEMINI_API_KEY);

function MbtiPage() {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState([]);
  const [selectedValue, setSelectedValue] = useState(null);
  const [isLoading, setIsLoading] = useState(false);
  const [isPlaying, setIsPlaying] = useState(true);
  const [volume, setVolume] = useState(0.3);
  const audioRef = useRef(new Audio('/ì¤‘ì„¸ë¸Œê¸ˆ.mp3'));
  const navigate = useNavigate();

  const handleSliderChange = (value) => {
    setSelectedValue(value);
  };

  const handleNextQuestion = async () => {
    if (selectedValue === null) return;

    const newAnswers = [
      ...answers,
      {
        question: TOTAL_QUESTIONS[currentQuestion],
        answer: selectedValue,
      },
    ];
    setAnswers(newAnswers);

    if (currentQuestion === TOTAL_QUESTIONS.length - 1) {
      setIsLoading(true);
      try {
        const response = await fetch('/.netlify/functions/analyze', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ 
            answers: newAnswers,
            theme: 'fantasy'
          })
        });

        if (!response.ok) {
          throw new Error('ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜');
        }

        const data = await response.json();
        navigate('/result', { state: { analysis: data.analysis } });
      } catch (error) {
        console.error('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
        alert('ì„œë¹„ìŠ¤ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      } finally {
        setIsLoading(false);
      }
    } else {
      setCurrentQuestion(prev => prev + 1);
      setSelectedValue(null);
    }
  };

  useEffect(() => {
    const audio = audioRef.current;
    audio.loop = true;
    audio.volume = volume;

    const handlePlay = () => setIsPlaying(true);
    const handlePause = () => setIsPlaying(false);

    audio.addEventListener('play', handlePlay);
    audio.addEventListener('pause', handlePause);

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì¬ìƒ
    audio.play().catch(error => {
      console.error('ì˜¤ë””ì˜¤ ìë™ ì¬ìƒ ì‹¤íŒ¨:', error);
    });

    return () => {
      audio.pause();
      audio.removeEventListener('play', handlePlay);
      audio.removeEventListener('pause', handlePause);
    };
  }, []);

  useEffect(() => {
    audioRef.current.volume = volume;
  }, [volume]);

  const togglePlay = () => {
    if (isPlaying) {
      audioRef.current.pause();
    } else {
      audioRef.current.play().catch(error => {
        console.error('ì˜¤ë””ì˜¤ ì¬ìƒ ì‹¤íŒ¨:', error);
      });
    }
  };

  const handleVolumeChange = (e) => {
    const newVolume = parseFloat(e.target.value);
    setVolume(newVolume);
  };

  if (isLoading) {
    return (
      <div className="loading-container">
        <div className="loading-content">
          <div className="loading-spinner"></div>
          <p className="loading-text">
            ë‹µë³€ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...<br />
            ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.
          </p>
        </div>
      </div>
    );
  }

  return (
    <>
      <NavigationBar />
      <div className="mbti-page" style={{
        backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.57), rgba(0, 0, 0, 0.66)), url('/background.png')`,
        backgroundSize: 'cover',
        backgroundPosition: 'center',
        backgroundRepeat: 'no-repeat',
        minHeight: '100vh',
        width: '100%',
        paddingTop: '60px'
      }}>
        <main className="main-content">
          <div className="question-container">
            <div className="progress-bar">
              <div 
                className="progress-fill"
                style={{ width: `${(currentQuestion / TOTAL_QUESTIONS.length) * 100}%` }}
              ></div>
            </div>
            <h2 className="question-text">{TOTAL_QUESTIONS[currentQuestion]}</h2>
            
            <div className="choice-container">
              <span className="choice-label left">ë¶€ì •</span>
              <div className="circles-container">
                {[1, 2, 3, 4, 5, 6, 7].map((value) => (
                  <button
                    key={value}
                    className={`circle-button ${selectedValue === value ? 'selected' : ''}`}
                    onClick={() => handleSliderChange(value)}
                  />
                ))}
              </div>
              <span className="choice-label right">ê¸ì •</span>
            </div>

            <button 
              className="next-button"
              onClick={handleNextQuestion}
              disabled={selectedValue === null}
            >
              {currentQuestion === TOTAL_QUESTIONS.length - 1 ? 'ê²°ê³¼ ë³´ê¸°' : 'ë‹¤ìŒ ì§ˆë¬¸'}
            </button>
          </div>
        </main>

        {/* ì˜¤ë””ì˜¤ ì»¨íŠ¸ë¡¤ UI */}
        <div className="audio-controls">
          <button 
            className={`audio-toggle ${isPlaying ? 'playing' : ''}`}
            onClick={togglePlay}
          >
            {isPlaying ? 'ìŒì•… ë„ê¸°' : 'ìŒì•… ì¼œê¸°'}
          </button>
          <div className="volume-control">
            <span className="volume-icon">ğŸ”Š</span>
            <input
              type="range"
              min="0"
              max="1"
              step="0.1"
              value={volume}
              onChange={handleVolumeChange}
              className="volume-slider"
            />
          </div>
        </div>
      </div>
    </>
  );
}

export default MbtiPage;
